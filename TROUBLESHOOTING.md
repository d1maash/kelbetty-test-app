# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–æ–≤

## üö® –ü—Ä–æ–±–ª–µ–º–∞: Invalid `prisma.document.create()` invocation

### –ü—Ä–∏—á–∏–Ω—ã:
1. **Null/undefined –∑–Ω–∞—á–µ–Ω–∏—è** –≤ –ø–æ–ª—è—Ö content –∏–ª–∏ htmlContent
2. **–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç** –¥–ª—è —Ç–∏–ø–∞ String –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. **–û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞** —Ñ–∞–π–ª–æ–≤

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```prisma
model Document {
  content     String @db.Text  // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã
  htmlContent String? @db.Text // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ
}
```

#### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ API:
```typescript
// app/api/upload/route.ts
content: parsedDocument.content || '',           // Fallback –¥–ª—è –ø—É—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
htmlContent: parsedDocument.htmlContent || null, // Null –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ HTML
```

#### 3. –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–µ—Ä —Ñ–∞–π–ª–æ–≤:
```typescript
// lib/advanced-file-parsers.ts
if (!result.content) {
  result.content = ''  // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–µ–ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ë–î:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: http://localhost:3000/test-simple-upload
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ª—é–±–æ–π —Ñ–∞–π–ª (.docx, .pptx, .xlsx, .pdf)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ë–î:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: http://localhost:3000/app
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ Clerk
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
Upload API: –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è: {
  contentLength: 1234,
  htmlContentLength: 5678,
  ...
}
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **"content is required"** ‚Üí –ü–∞—Ä—Å–µ—Ä –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
2. **"Text too long"** ‚Üí –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @db.Text
3. **"User not found"** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ —Å Clerk –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
npm run db:push

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
npm run check-env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run dev
```

## üìã –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:

- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω–∞ (Docker)
- [ ] –°—Ö–µ–º–∞ Prisma –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Clerk –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `/test-simple-upload`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (–º–∞–∫—Å. 50MB)
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

---

üí° **–°–æ–≤–µ—Ç**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ - –æ–Ω–∏ –ø–æ–∫–∞–∂—É—Ç —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏!
